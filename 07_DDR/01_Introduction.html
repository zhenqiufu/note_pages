<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>DDR Introduction - NoteBook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">NoteBook</a></li><li class="chapter-item expanded affix "><li class="part-title">工作</li><li class="chapter-item expanded "><a href="../01_体系结构/index.html"><strong aria-hidden="true">1.</strong> 体系结构</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/01_SMMU/index.html"><strong aria-hidden="true">1.1.</strong> 内存管理</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/01_SMMU/内存管理基础.html"><strong aria-hidden="true">1.1.1.</strong> 内存管理基础</a></li><li class="chapter-item expanded "><a href="../01_体系结构/01_SMMU/SMMU.html"><strong aria-hidden="true">1.1.2.</strong> SMMU</a></li><li class="chapter-item expanded "><a href="../01_体系结构/01_SMMU/SVA.html"><strong aria-hidden="true">1.1.3.</strong> 异构内存管理SVA</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/04_NoC片内互连总线/index.html"><strong aria-hidden="true">1.2.</strong> NoC片上互连</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/04_NoC片内互连总线/CHI.html"><strong aria-hidden="true">1.2.1.</strong> CHI协议</a></li><li class="chapter-item expanded "><a href="../01_体系结构/04_NoC片内互连总线/NoC_introduction.html"><strong aria-hidden="true">1.2.2.</strong> NoC</a></li><li class="chapter-item expanded "><a href="../01_体系结构/04_NoC片内互连总线/CMN700.html"><strong aria-hidden="true">1.2.3.</strong> CMN700</a></li><li class="chapter-item expanded "><a href="../01_体系结构/04_NoC片内互连总线/NI_700.html"><strong aria-hidden="true">1.2.4.</strong> NI-700</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/02_中断控制器/index.html"><strong aria-hidden="true">1.3.</strong> 异常与中断</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/02_中断控制器/中断.html"><strong aria-hidden="true">1.3.1.</strong> 异常与中断</a></li><li class="chapter-item expanded "><a href="../01_体系结构/02_中断控制器/GIC.html"><strong aria-hidden="true">1.3.2.</strong> ARM GIC</a></li><li class="chapter-item expanded "><a href="../01_体系结构/02_中断控制器/X86_APIC.html"><strong aria-hidden="true">1.3.3.</strong> X86 APIC</a></li><li class="chapter-item expanded "><a href="../01_体系结构/02_中断控制器/RISCV_AIA.html"><strong aria-hidden="true">1.3.4.</strong> RISCV AIA</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/05_CortexM3/index.html"><strong aria-hidden="true">1.4.</strong> SoC</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/05_CortexM3/概述.html"><strong aria-hidden="true">1.4.1.</strong> Cortex M3 MCU</a></li><li class="chapter-item expanded "><a href="../03_PCIe/01_PCIe子系统简介/index.html"><strong aria-hidden="true">1.4.2.</strong> ARM N2 参考设计</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/06_固件/index.html"><strong aria-hidden="true">1.5.</strong> 固件</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/06_固件/ARM固件启动顺序.html"><strong aria-hidden="true">1.5.1.</strong> ARM固件启动顺序</a></li><li class="chapter-item expanded "><a href="../01_体系结构/06_固件/RISCV_firmware.html"><strong aria-hidden="true">1.5.2.</strong> RISC-V固件启动顺序</a></li><li class="chapter-item expanded "><a href="../01_体系结构/06_固件/EDK2_EVENT.html"><strong aria-hidden="true">1.5.3.</strong> EDK2 Event</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/07_存储/index.html"><strong aria-hidden="true">1.6.</strong> 存储</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/07_存储/file_system.html"><strong aria-hidden="true">1.6.1.</strong> 文件系统</a></li><li class="chapter-item expanded "><a href="../01_体系结构/07_存储/RAID.html"><strong aria-hidden="true">1.6.2.</strong> RAID</a></li><li class="chapter-item expanded "><a href="../01_体系结构/07_存储/ssd.html"><strong aria-hidden="true">1.6.3.</strong> SSD</a></li><li class="chapter-item expanded "><a href="../01_体系结构/07_存储/分布式存储.html"><strong aria-hidden="true">1.6.4.</strong> 分布式存储系统</a></li></ol></li><li class="chapter-item expanded "><a href="../01_体系结构/08_虚拟化与分布式/index.html"><strong aria-hidden="true">1.7.</strong> 虚拟化与分布式</a></li><li class="chapter-item expanded "><a href="../01_体系结构/09_Memory_Consistency/index.html"><strong aria-hidden="true">1.8.</strong> Memory consistency and cache coherence</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../01_体系结构/09_Memory_Consistency/memory_consistency.html"><strong aria-hidden="true">1.8.1.</strong> Memory consistency</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../02_AMBA/index.html"><strong aria-hidden="true">2.</strong> AMBA</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../02_AMBA/AXI.html"><strong aria-hidden="true">2.1.</strong> AXI</a></li><li class="chapter-item expanded "><a href="../02_AMBA/CHI.html"><strong aria-hidden="true">2.2.</strong> CHI</a></li></ol></li><li class="chapter-item expanded "><a href="../03_PCIe/index.html"><strong aria-hidden="true">3.</strong> PCIe</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_PCIe/index.html"><strong aria-hidden="true">3.1.</strong> 协议学习</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_PCIe/00_PCIe协议/physical_layer.html"><strong aria-hidden="true">3.1.1.</strong> Physical Layer</a></li><li class="chapter-item expanded "><a href="../03_PCIe/00_PCIe协议/data_link_layer.html"><strong aria-hidden="true">3.1.2.</strong> Data Link Layer</a></li><li class="chapter-item expanded "><a href="../03_PCIe/00_PCIe协议/TransactionLayer.html"><strong aria-hidden="true">3.1.3.</strong> Transaction Layer</a></li></ol></li><li class="chapter-item expanded "><a href="../03_PCIe/01_PCIe子系统简介/index.html"><strong aria-hidden="true">3.2.</strong> ARM N2 参考设计</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_PCIe/01_PCIe子系统简介/01_PCIe子系统.html"><strong aria-hidden="true">3.2.1.</strong> 01_PCIe子系统.md</a></li></ol></li><li class="chapter-item expanded "><a href="../03_PCIe/02_PCIe枚举与资源分配/index.html"><strong aria-hidden="true">3.3.</strong> PCIe 枚举与资源分配</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_PCIe/02_PCIe枚举与资源分配/枚举过程中的资源降级.html"><strong aria-hidden="true">3.3.1.</strong> 枚举过程中的资源降级</a></li><li class="chapter-item expanded "><a href="../03_PCIe/02_PCIe枚举与资源分配/EDK2对optionRom的支持.html"><strong aria-hidden="true">3.3.2.</strong> EDK2对optionRom的支持</a></li></ol></li><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/index.html"><strong aria-hidden="true">3.4.</strong> PCIe 高级特性</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/PCIe_AER.html"><strong aria-hidden="true">3.4.1.</strong> PCIe AER</a></li><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/PCIe_Interrupt.html"><strong aria-hidden="true">3.4.2.</strong> PCIe Interrupt</a></li><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/PCIe_Hot_Plug.html"><strong aria-hidden="true">3.4.3.</strong> PCIe Hot-Plug</a></li><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/PCIe_Power_management.html"><strong aria-hidden="true">3.4.4.</strong> PCIe Power Management</a></li><li class="chapter-item expanded "><a href="../03_PCIe/03_PCIe高级特性/PCIe_DPC.html"><strong aria-hidden="true">3.4.5.</strong> PCIe_DPC.md</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../06_CXL/index.html"><strong aria-hidden="true">4.</strong> CXL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../06_CXL/01_cxl.html"><strong aria-hidden="true">4.1.</strong> CXL Overview</a></li><li class="chapter-item expanded "><a href="../06_CXL/cxl_reg.html"><strong aria-hidden="true">4.2.</strong> CXL 寄存器</a></li><li class="chapter-item expanded "><a href="../06_CXL/CXL_in_CMN.html"><strong aria-hidden="true">4.3.</strong> CXL_in_CMN</a></li><li class="chapter-item expanded "><a href="../06_CXL/CXL_in_SCP.html"><strong aria-hidden="true">4.4.</strong> CXL_in_SCP</a></li><li class="chapter-item expanded "><a href="../06_CXL/cxl枚举.html"><strong aria-hidden="true">4.5.</strong> CXL 枚举</a></li></ol></li><li class="chapter-item expanded "><a href="../07_DDR/index.html"><strong aria-hidden="true">5.</strong> DDR</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../07_DDR/01_Introduction.html" class="active"><strong aria-hidden="true">5.1.</strong> DDR Introduction</a></li></ol></li><li class="chapter-item expanded "><a href="../04_ACPI/index.html"><strong aria-hidden="true">6.</strong> ACPI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../04_ACPI/ACPI_overview.html"><strong aria-hidden="true">6.1.</strong> ACPI Overview</a></li></ol></li><li class="chapter-item expanded "><a href="../09_OS/index.html"><strong aria-hidden="true">7.</strong> OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../09_OS/FreeRTOS.html"><strong aria-hidden="true">7.1.</strong> FreeRTOS</a></li></ol></li><li class="chapter-item expanded "><a href="../05_LeetCode/LeetCode.html"><strong aria-hidden="true">8.</strong> LeetCode</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../05_LeetCode/01_二分法.html"><strong aria-hidden="true">8.1.</strong> 二分法</a></li><li class="chapter-item expanded "><a href="../05_LeetCode/02_链表.html"><strong aria-hidden="true">8.2.</strong> 链表</a></li></ol></li><li class="chapter-item expanded "><a href="../08_tool/index.html"><strong aria-hidden="true">9.</strong> Tool</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../08_tool/git.html"><strong aria-hidden="true">9.1.</strong> Git</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">读书</li><li class="chapter-item expanded "><a href="../0a_reading/工作中的好习惯.html"><strong aria-hidden="true">10.</strong> 工作中的好习惯</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">NoteBook</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ddr-introduction"><a class="header" href="#ddr-introduction">DDR Introduction</a></h1>
<p>[toc]</p>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>SDRAM vs. SRAM</p>
<ul>
<li>
<p>Synchronous Dynamic Random Access Memory</p>
</li>
<li>
<p>Static RAM</p>
</li>
</ul>
<p><img src="images/01_Introduction/image-20240725093325332.png" alt="image-20240725093325332" /></p>
<p>片内通常用SRAM，片外用SDRAM。</p>
<p><img src="images/01_Introduction/image-20240725103832027.png" alt="image-20240725103832027" /></p>
<h4 id="ddr3-sdram电路结构高清图"><a class="header" href="#ddr3-sdram电路结构高清图">DDR3 SDRAM电路结构高清图</a></h4>
<p><img src="images/01_Introduction/image-20240725094537472.png" alt="image-20240725094537472" /></p>
<ul>
<li>左上是命令信号，下面是地址，18b长度；</li>
<li>地址存到地址寄存器；</li>
<li>8个bank -&gt;  BA[2:0], 3个bit表示8个结果；</li>
<li>行选择，地址A，15b长度；</li>
<li>列选择，长度10b;</li>
<li>8192： 一行存储的电荷容量；</li>
</ul>
<p><strong>行地址（Row Address）</strong>：16位（A0-A15）</p>
<p><strong>列地址（Column Address）</strong>：10位（A0-A9）</p>
<p><strong>Bank地址（Bank Address）</strong>：3位（BA0-BA2）</p>
<p>4个时钟周期，上升下降都传输，8比特。</p>
<p><img src="images/01_Introduction/image-20240725101809984.png" alt="image-20240725101809984" /></p>
<p>256Mb Configuration</p>
<div class="table-wrapper"><table><thead><tr><th>参数</th><th>256Mb x 4</th><th>128Mb x 8</th><th>64Mb x 16</th></tr></thead><tbody>
<tr><td># of Banks</td><td>8</td><td>8</td><td>8</td></tr>
<tr><td>Bank Address</td><td>BA0 - BA2</td><td>BA0 - BA2</td><td>BA0 - BA2</td></tr>
<tr><td>Auto precharge</td><td>A10/AP</td><td>A10/AP</td><td>A10/AP</td></tr>
<tr><td>BC switch on the fly</td><td>A12/BC#</td><td>A12/BC#</td><td>A12/BC#</td></tr>
<tr><td>Row Address</td><td>A0 - A13</td><td>A0 - A13</td><td>A0 - A12</td></tr>
<tr><td>Column Address</td><td>A0 - A9,A11</td><td>A0 - A9</td><td>A0 - A9</td></tr>
<tr><td>Page size</td><td>1 KB</td><td>1 KB</td><td>2 KB</td></tr>
</tbody></table>
</div>
<p>2Gb Configuration</p>
<div class="table-wrapper"><table><thead><tr><th>参数</th><th>512Mb x 4</th><th>256Mb x 8</th><th>128Mb x 16</th></tr></thead><tbody>
<tr><td># of Banks</td><td>8</td><td>8</td><td>8</td></tr>
<tr><td>Bank Address</td><td>BA0 - BA2</td><td>BA0 - BA2</td><td>BA0 - BA2</td></tr>
<tr><td>Auto precharge</td><td>A10/AP</td><td>A10/AP</td><td>A10/AP</td></tr>
<tr><td>BC switch on the fly</td><td>A12/BC#</td><td>A12/BC#</td><td>A12/BC#</td></tr>
<tr><td>Row Address</td><td>A0 - A14</td><td>A0 - A14</td><td>A0 - A13</td></tr>
<tr><td>Column Address</td><td>A0 - A9,A11</td><td>A0 - A9</td><td>A0 - A9</td></tr>
<tr><td>Page size</td><td>1 KB</td><td>1 KB</td><td>2 KB</td></tr>
</tbody></table>
</div>
<h4 id="ddr4-sdram电路结构高清图"><a class="header" href="#ddr4-sdram电路结构高清图">DDR4 SDRAM电路结构高清图</a></h4>
<p><img src="images/01_Introduction/image-20240725095148736.png" alt="image-20240725095148736" /></p>
<p><strong>行地址（Row Address）</strong>：16位（A0-A15）</p>
<p><strong>列地址（Column Address）</strong>：10位（A0-A9）</p>
<p><strong>Bank地址（Bank Address）</strong>：2位（BA0-BA1）</p>
<p><strong>Bank组地址（Bank Group Address）</strong>：2位（BG0-BG1）</p>
<h4 id="ddr5-sdram电路结构高清图"><a class="header" href="#ddr5-sdram电路结构高清图">DDR5 SDRAM电路结构高清图</a></h4>
<p><img src="images/01_Introduction/image-20240725100117145.png" alt="image-20240725100117145" /></p>
<p><strong>行地址（Row Address）</strong>：16位（A0-A15）</p>
<p><strong>列地址（Column Address）</strong>：10位（A0-A9）</p>
<p><strong>Bank组地址（Bank Group Address）</strong>：2位（BA0-BA1）</p>
<p><strong>Bank地址（Bank Address）</strong>：3位（BG0-BG2）</p>
<p><strong>命令地址（Command Address）</strong>：统一使用CA总线</p>
<h2 id="存储层次"><a class="header" href="#存储层次">存储层次</a></h2>
<ol>
<li>Channel：处理器的内存控制器的通道数量</li>
<li>Module：内存条，可以有多个内存条连接到同一个 Channel 上</li>
<li>Rank：多个 DDR SDRAM 芯片在宽度上拼接起来，一个 Module 上可以放下一到四个 Rank，这些 Rank 共享总线，每个 Rank 都有自己的片选信号 CS_n，实际上就是在深度上拼接 SDRAM 芯片</li>
<li>Chip：也就是一个 DDR SDRAM 芯片，例如一个数据位宽是 64 位的 Rank，是使用 8 个 x8 的 Chip 在宽度上拼接而成</li>
<li>Bank Group：DDR4 引入，通过 Bank Group 掩盖 DDR4 同一个 Bank Group 内连续读的延迟 tCCD_L</li>
<li>Bank：每个 Bank 同时只有一个 Row 被激活，通过多个 Bank 掩盖 Activate/Precharge 的延迟</li>
<li>Row：Activate/Precharge 的单位</li>
<li>Column：每个 Column 保存 n 个 Cell，n 是 SDRAM 的位宽</li>
<li>Cell：每个 Cell 保存 1 bit 的数据</li>
</ol>
<h2 id="一些概念"><a class="header" href="#一些概念">一些概念</a></h2>
<h3 id="page的概念"><a class="header" href="#page的概念">Page的概念</a></h3>
<ul>
<li><strong>行（Row）和列（Column）</strong>：DDR内存被组织成一个二维数组，分为行和列。每个单元格存储一个位或几个位的数据。</li>
<li><strong>Page（页）</strong>：一次性可以被同时激活的行称为一页。当一行被激活后，内存控制器可以快速访问该行内的所有列数据，这样可以减少访问延迟。</li>
<li><strong>页大小</strong>：页的大小通常由行的宽度和列的宽度决定。例如，如果一行有1024个单元格，每个单元格存储一个字节，那么这一页的大小就是1024字节。</li>
</ul>
<p>为什么上面表格中有一个是2K page呢，因为它一行中1024个单元，但是是x16的，也就是2个B，所以是2KB。</p>
<h3 id="8n预取"><a class="header" href="#8n预取">8N预取</a></h3>
<p>内部总线是32位，外部是4位；8倍的关系，就是8N；</p>
<p>读操作，一下取32位，由并转串，发出去；</p>
<p>内部时钟是慢的，外部时钟是快的；</p>
<h2 id="内存训练"><a class="header" href="#内存训练">内存训练</a></h2>
<p>地址和控制信号使用的是菊花连，数据信号（DQ、DQS 和 DM）使用的是并行。</p>
<p><img src="images/01_Introduction/image-20240725110000495.png" alt="image-20240725110000495" /></p>
<p>fly-by的方式导致不同DRAM看到波形不同，有不同的延迟，越远延迟越大。需要在控制器侧加一些延迟，让数据对齐。</p>
<p>CLK/CLK#、DQS、AD和CMD信号不需要同时传递，改善了信号完整性，使更高频率成为可能。</p>
<p>DQ走的是并行。</p>
<p>地址行有效，列有效以后，第一颗芯片很快就准备好了数据，放到DQ上了，第8颗需要等很久才准备好。如果都准备好了，kua的一下，DQ去采样，就好了。就需要训练。</p>
<h3 id="write-leveling"><a class="header" href="#write-leveling">Write Leveling</a></h3>
<p>这部分解决 Fly-by Topology 带来的延迟不一致问题。</p>
<p>让 SDRAM 芯片接受到的 DQS 信号与 CK 信号同步。也就是确保所有数据线（DQ）和数据选通信号（DQS）在到达内存模块时是同步的。</p>
<p>DQS（Data Strobe）信号和CK（Clock）信号是关键的时钟和数据同步信号，用于确保数据的准确传输和接收。</p>
<p><strong>DQS信号</strong>：是数据选通信号，用于同步数据传输，确保数据在正确的时刻被锁存，用于在数据传输过程中指示数据有效时刻。它在读写操作中分别由内存模块和内存控制器生成，并与数据一起传输。</p>
<p><strong>CK信号</strong>：提供时钟基准，控制所有同步操作。数据在时钟信号的上升沿和下降沿都被传输，实现双倍数据速率。</p>
<p><strong>DQ信号</strong>：负责传输内存读写操作中的实际数据。每一条DQ信号线对应一个数据位。</p>
<p>简单来说，就是内存控制器不停的发送不同时延的DQS 信号，内存 颗粒在DQS-DQS#的上升沿采样CK 的状态，并通过DQ 线反馈给DDR3 控制器（一组01010101的数据）。控制器端反复的调整DQS-DQS#的延时，直到控制器端检测到DQ 线上0 到1 的跳变控制器就锁住此时的延时值，此时便完成了一个Write leveling过程。</p>
<p>过程：</p>
<ol>
<li>设置 SDRAM 进入 Write Leveling 模式，此时 SDRAM 会使用 DQS 对 CK 采样，把结果输出到 DQ</li>
<li>控制器枚举 DQS 的延迟，读取出每个 DQS 延迟下的 DQ 结果，得到一个 0-1 串，例如：<code>001111111111111111110000</code>，即随着延迟增大，先采样到 0，再采样到 1，最后又采样到 0</li>
<li>找到一个 DQS 延迟，使得 DQ 出现一个从 0 到 1 的变化，那么按照这个延迟输出，DQS 就会与 CK 同步</li>
<li>设置 SDRAM 结束 Write Leveling 模式</li>
</ol>
<h3 id="read-leveling"><a class="header" href="#read-leveling">Read Leveling</a></h3>
<p>对于读操作，数据是从 SDRAM 发送给控制器，不同的数据到达控制器的时间可能也不同，因此也需要对读操作进行校准。</p>
<p>为了判断读取的数据是否正确，做法是首先写入已知的数据，然后再读出来，如果读取的数据和写入的数据完全一致，就说明可以正确地进行读操作。</p>
<p>过程：</p>
<ol>
<li>写入数据（或者用 SDRAM 的生成固定 Pattern 输出的功能）</li>
<li>设置延迟从 0 开始循环，不断增大</li>
<li>在每个延迟的设定下，读取出数据，把读取的结果与之前写入的数据进行比较</li>
<li>统计出哪些延迟条件下，读取数据是准确的，准确的记为 1，不准确的记为 0</li>
<li>找到表示准确的 1 的范围，取中点作为最终的校准结果</li>
</ol>
<p>注意这里不再是找到 0-1 的变化的地方，Write Leveling 找 0-1 变化是为了同步，同步的地方正是 0-1 变化的地方；而 Read Leveling 的目的是要读取出正确的数据，已知有一段连续的延迟区间，区间内都可以读出正确的数据，那么取其中点，即使因为温度等条件变化，区间出现移动，因为保留了足够的余量，所以依然可以工作。取中点这一步也称为 Read Centering。</p>
<h2 id="spec"><a class="header" href="#spec">Spec</a></h2>
<p>SDRAM 相关标准由 JEDEC 制定：</p>
<ul>
<li><a href="https://www.jedec.org/standards-documents/docs/jesd-79f">JESD79F: DDR SDRAM</a></li>
<li><a href="https://www.jedec.org/sites/default/files/docs/JESD79-2F.pdf">JESD79-2F: DDR2 SDRAM</a></li>
<li><a href="https://www.jedec.org/sites/default/files/docs/JESD79-3F.pdf">JESD79-3F: DDR3 SDRAM</a></li>
<li>[JESD79-4D: DDR4 SDRAM](https://www.jedec.org/document_search?search_api_views_fulltext=jesd79-4 ddr4)</li>
<li><a href="https://www.jedec.org/document_search?search_api_views_fulltext=jesd79-5">JESD79-5B: DDR5 SDRAM</a></li>
</ul>
<p>除了 DDR 系列，还有低功耗的 LPDDR 系列：</p>
<ul>
<li><a href="https://www.jedec.org/system/files/docs/JESD209B.pdf">JESD209B: LPDDR SDRAM</a></li>
<li><a href="https://www.jedec.org/system/files/docs/JESD209-2F.pdf">JESD209-2F: LPDDR2 SDRAM</a></li>
<li><a href="https://www.jedec.org/document_search?search_api_views_fulltext=JESD209-3">JESD209-3C: LPDDR3 SDRAM</a></li>
<li><a href="https://www.jedec.org/document_search?search_api_views_fulltext=JESD209-4">JESD209-4D: LPDDR4 SDRAM</a></li>
<li><a href="https://www.jedec.org/document_search?search_api_views_fulltext=JESD209-5">JESD209-5B: LPDDR5 SDRAM</a></li>
</ul>
<p>高性能常用的 HBM 也基于 SDRAM 技术：</p>
<ul>
<li><a href="https://www.jedec.org/standards-documents/docs/jesd235a">JESD235D: HBM</a></li>
<li><a href="https://www.jedec.org/system/files/docs/JESD238A.pdf">JESD238A: HBM3</a></li>
</ul>
<p>还有 GDDR SGRAM 系列：</p>
<ul>
<li><a href="https://www.jedec.org/system/files/docs/3_11_5_8_R16.01.pdf">SDRAM3.11.5.8 R16.01: GDDR4 SGRAM</a></li>
<li><a href="https://www.jedec.org/system/files/docs/JESD212C.01.pdf">JESD212C.01: GDDR5 SGRAM</a></li>
<li><a href="https://www.jedec.org/system/files/docs/JESD232A.01.pdf">JESD232A.01: GDDR5X SGRAM</a></li>
<li><a href="https://www.jedec.org/system/files/docs/JESD250D.pdf">JESD250D: GDDR6 SGRAM</a></li>
</ul>
<p>参考：</p>
<p>https://www.cnblogs.com/sky-heaven/p/15948268.html</p>
<p><a href="https://jia.je/kb/hardware/sdram.html">Blog</a></p>
<p>https://zhuanlan.zhihu.com/p/26327347</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../07_DDR/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../04_ACPI/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../07_DDR/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../04_ACPI/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
